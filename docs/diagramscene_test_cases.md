# 流程图编辑器测试用例（依据设计文档）

> 说明：覆盖文件/绘图/连线/属性/画布/查找替换/快捷键/持久化等核心功能。可按需选择手工或半自动执行；若接入自动化脚本，请确保 Qt 环境与构建产物已就绪。

## 1. 文件与持久化
- 打开工程：打开示例 `.fcproj`（含多图元与连线），加载成功无崩溃，场景元素完整显示。
- 另存与最近路径：另存为新工程名，关闭再打开，自动定位到最近保存路径，内容一致。
- 导出图片：导出 PNG/JPG/SVG 三种格式，文件存在且尺寸 > 0，无报错。
- 空场景保存：空场景保存/导出不崩溃，可正常生成空白文件。
- 损坏工程：尝试加载损坏/空 `.fcproj`，给出错误提示且不崩溃。

## 2. 绘图与编辑
- 插入与属性：插入矩形/圆形/箭头等（20 种 DiagramType 抽样 3～5 种），拖动、缩放、改颜色与文本，属性实时更新。
- 复制/粘贴/剪切：对单个图元执行 Ctrl+C/V/X，位置与内容正确复制/移动。
- 层级：调整前后堆叠顺序，确认遮挡关系变化。
- 批量操作：Shift 框选多个图元，批量修改颜色/位置。
- 删除与撤销：Delete 删除后 Ctrl+Z 撤销、Ctrl+Y 重做，状态一致。

## 3. 连线与路径
- 基本连线：在两图元间创建连线，移动端点触发自动吸附，线条跟随更新。
- 路径重算：移动图元后路径自动重算（含折线路径），无断裂。
- 模式切换：在 InsertItem/InsertLine/InsertText/MoveItem/InsertPath 间切换，鼠标事件符合模式预期。

## 4. 文本与查找替换
- 文本编辑：双击进入编辑，修改文字，失焦后保留；撤销/重做恢复文本。
- 查找/替换：打开查找替换对话框，查找存在的字符串，替换一次与全替换均生效。

## 5. 画布与视图
- 缩放：设置 50%/75%/100% 视图比例，内容正常缩放，无失真/崩溃。
- 网格：切换黑白棋盘/蓝白棋盘/无网格线，显示与对齐辅助正常。
- 背景：导入 PNG/JPG/BMP 作为背景，背景更新且与网格/图元叠加正常。

## 6. 快捷键与交互
- 快捷键集合：Ctrl+C/V/X，Ctrl+Z/Y，Ctrl+R/L（旋转），Delete，均触发对应操作。
- 吸附与移动：拖拽图元，测试吸附与对齐辅助线；多次拖动后撤销，位置正确恢复。

## 7. 稳定性/边界
- 大场景：在大于 50 个图元的场景中平移/缩放/连线，操作流畅无崩溃。
- Undo/Redo 压力：连续多次移动/编辑后反复撤销/重做，栈行为正确，无异常膨胀或卡死。
- 资源文件：缺失图标/字体时给出可理解提示，不导致启动崩溃。

## 8. 验收要点
- 构建/启动无崩溃，核心工具链（绘制/连线/查找替换/导出）均可用。
- 操作状态可撤销/重做；保存/加载/导出结果可复现。
- 交互流畅、快捷键有效，错误输入能被防御。
